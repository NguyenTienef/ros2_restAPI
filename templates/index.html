<nav style="margin-bottom: 20px;">
  <button onclick="location.href='/'">ğŸ  Trang chÃ­nh</button>
  <button onclick="location.href='/missions'">ğŸ—ºï¸ Quáº£n lÃ½ Missions</button>
</nav>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drone Telemetry Realtime</title>
    <style>
        body { font-family: monospace; background: #111; color: #0f0; padding: 20px; }
        #status { font-size: 1.2rem; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h2>ğŸ›°ï¸ Drone Telemetry Status</h2>
    <div id="status">Äang táº£i dá»¯ liá»‡u...</div>

    <script>
        async function updateTelemetry() {
            try {
                const res = await fetch('/api/telemetry');
                const data = await res.json();

                if (data.length > 0) {
                    const d = data[0];
                    const status = `ğŸ”‹ Battery: ${d.battery_level.toFixed(1)}% | ğŸ“ Lat: ${d.latitude.toFixed(6)} | Lon: ${d.longitude.toFixed(6)} | Alt: ${d.altitude.toFixed(1)} | âœˆï¸ In Flight: ${d.in_flight} | ğŸ•“ Time: ${new Date(d.timestamp).toLocaleString()}`;
                    document.getElementById('status').textContent = status;
                } else {
                    document.getElementById('status').textContent = "âš ï¸ ChÆ°a cÃ³ dá»¯ liá»‡u!";
                }
            } catch (err) {
                document.getElementById('status').textContent = "âŒ Lá»—i khi táº£i dá»¯ liá»‡u.";
                console.error(err);
            }
        }

        setInterval(updateTelemetry, 1000);  // Cáº­p nháº­t má»—i giÃ¢y
        updateTelemetry();  // Gá»i láº§n Ä‘áº§u
    </script>
</body>
</html>
